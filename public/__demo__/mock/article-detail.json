{
  "status": "success",
  "message": "Get article detail succeeded",
  "result": {
    "keywords": ["工程化", "构建", "工具链", "性能", "维护"],
    "state": 1,
    "public": 1,
    "origin": 1,
    "featured": true,
    "disabled_comments": false,
    "tags": [
      "5c5db19dad6d7f402c3d4e07",
      "5c4ca08c9d5c6e3f1b2c3d05",
      "5d55290314d2e6b7a394b01b",
      "5c6ec2aebe7e80513d4e5f09",
      "5c2a8d6a7b3a4c1d9f0e1a01",
      "58d47e7fd1c6e87b0b82c667"
    ],
    "categories": ["65a10ad54a4ad562430953e1", "65a10ad54a4ad562430953e2"],
    "_id": "676fa1321a53290533a7f206",
    "id": 6,
    "slug": "build-notes",
    "title": "关于工程架构的备忘",
    "description": "把常用的构建、发布和工程实践整理成一份可复用、可维护的备忘。",
    "content": "\n在大多数项目里，构建系统往往是“最后才被认真对待的部分”。\n\n一开始，我们只需要一个能跑起来的脚本；后来，项目变复杂了，依赖变多了，构建时间变长了，问题也开始悄悄累积。\n\n这篇文章并不是一份教程，而是一份长期维护过程中留下的备忘，记录我在多个项目中反复踩过的坑，以及后来逐渐形成的一些共识。\n\n---\n\n## 一、构建不是工具问题，而是边界问题\n\n很多人谈构建，第一反应是选型：用什么打包器、什么工具链、什么插件组合。但真正的问题往往不在工具本身，而在**边界是否清晰**。\n\n一个健康的构建系统，至少要回答清楚几个问题：\n\n- 构建阶段和运行阶段的职责是否分离？\n- 本地开发、CI、生产环境之间的差异是否被显式表达？\n- 哪些东西是“必须稳定”的，哪些是可以随时替换的？\n\n如果这些问题没有想清楚，再先进的工具也只会加速混乱。\n\n---\n\n## 二、最小可维护构建链路\n\n我逐渐形成的一个原则是：**先定义最小闭环，再逐步扩展**。\n\n一个最小可维护的构建链路，通常包含：\n\n1. 明确的入口：dev / build / preview\n2. 可追踪的产物：版本号、commit hash、构建时间\n3. 单一职责的配置文件，而不是一个“什么都能干”的总配置\n\n只要这个闭环是稳定的，后续再加入分析、拆包、优化，风险会小得多。\n\n---\n\n## 三、性能优化不是一次性行为\n\n性能问题往往不是“突然变慢”的，而是随着需求增长逐渐累积的。\n\n我更倾向于把性能拆成三个层面：\n\n- 构建性能：依赖体积、缓存命中率、并行能力\n- 运行时性能：bundle 体积、加载顺序、拆分策略\n- 可观测性：有没有指标能证明“现在更快了”\n\n如果缺少第三点，前两点往往会陷入主观判断，甚至自我安慰。\n\n---\n\n## 四、Demo 与 Mock 的工程意义\n\n在 demo 项目中，我会刻意限制能力边界：\n\n- 只支持必要的 GET 接口\n- 对不支持的操作返回稳定、明确的错误\n- 成功和失败的返回结构保持一致\n\n这样做的目的不是“偷懒”，而是让使用者在最早阶段就理解系统的能力范围。\n\n从工程角度看，一个好的 mock 系统，本身就是构建体系的一部分。\n\n---\n\n## 五、开源项目里的构建现实\n\n在开源项目中，构建问题往往被放大：\n\n- 使用者的环境不可控\n- 维护者的精力有限\n- 任何破坏性改动都会产生外溢成本\n\n因此，构建配置的稳定性，往往比“是否最新”更重要。\n\n我更愿意慢一点升级工具，但每一次升级都配套迁移说明和回滚方案。\n\n---\n\n## 六、一些写给未来自己的提醒\n\n- 不要为了“看起来专业”而复杂化构建\n- 任何抽象都应该能被删除，而不是只能被叠加\n- 构建系统的价值，不在于炫技，而在于让团队少做无意义的决定\n\n如果有一天我完全忘记了这些细节，希望还能通过这份备忘，快速找回当时的判断逻辑。\n",
    "thumbnail": "https://raw.githubusercontent.com/surmon-china/surmon.admin/main/public/images/thumbnail.jpg",
    "extends": [],
    "meta": {
      "likes": 33,
      "views": 2184,
      "comments": 11
    },
    "updated_at": "2025-06-29T10:20:31.552Z",
    "created_at": "2025-06-18T09:12:44.533Z"
  }
}
